<% include ./partials/header.ejs %>

<div class="container mx-auto max-w-md mt-20">
  <h2 class="text-2xl mb-6">Register Student</h2>
  <form id="studentForm" action="/registerstudent" method="POST">
    <input type="text" name="name" placeholder="Student Name" class="block w-full px-4 py-2 mb-4 border rounded-md">
    <input type="text" name="enrollmentNo" placeholder="Enrollment No." class="block w-full px-4 py-2 mb-4 border rounded-md">
    <input type="hidden" name="studentImage" id="studentImage"> 

    <!-- Button to choose image -->
    <button type="button" id="chooseImageBtn" class="bg-blue-500 text-white px-4 py-2 rounded-md">Choose Image</button>

    <!-- Image preview container -->
    <div id="imagePreviewContainer" class="mt-4 mb-4" style="display: none;">
      <img id="imagePreview" src="" alt="Image Preview" class="block mx-auto mb-2">
      <button type="button" id="retakeImageButton" class="bg-red-500 text-white px-4 py-2 rounded-md">Retake Image</button>
    </div>

    <!-- Submit button -->
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md">Register Student</button>
  </form>
</div>

<!-- Modal for image capture options -->
<div id="imageCaptureModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center" style="display: none;">
  <div class="bg-white p-8 rounded-lg">
    <h3 class="text-xl mb-4">Choose Image Source</h3>
    <button id="captureFromCameraBtn" class="bg-blue-500 text-white px-4 py-2 rounded-md mb-4">Capture from Camera</button>
    <input type="file" accept="image/*" id="uploadFromGalleryInput" style="display: none;">
    <label for="uploadFromGalleryInput" class="bg-blue-500 text-white px-4 py-2 rounded-md cursor-pointer">Upload from Gallery</label>
  </div>
</div>

<!-- Modal for capturing image from camera -->
<div id="captureImageModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center" style="display: none;">
  <div class="bg-white p-8 rounded-lg">
    <h3 class="text-xl mb-4">Capture Image</h3>
    <video id="cameraVideo" autoplay playsinline class="mb-4" style="width: 100%;"></video>
    <div>
      <button type="button" id="captureImageButton" class="bg-blue-500 text-white px-4 py-2 rounded-md">Capture Image</button>
      <button type="button" id="cancelCaptureBtn" class="bg-gray-500 text-white px-4 py-2 rounded-md ml-4">Cancel</button>
    </div>
  </div>
</div>

<script src="javascripts/register-student.js"></script>

<% include ./partials/footer.ejs %>
